{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"IES CELIA VI\u00d1AS - 2\u00ba ASIR","text":""},{"location":"#practicas-iaw-aitor-rodriguez-yebra","title":"PR\u00c1CTICAS IAW - AITOR RODR\u00cdGUEZ YEBRA","text":""},{"location":"practica1/","title":"IAW - Pr\u00e1ctica 1.1","text":""},{"location":"practica1/#instalacion-de-la-pila-lamp-en-una-instancia-ec2-de-aws-con-ubuntu-server","title":"Instalaci\u00f3n de la pila LAMP en una instancia EC2 de AWS con Ubuntu Server","text":""},{"location":"practica1/#preparacion-de-la-estructura-de-directorios","title":"Preparaci\u00f3n de la estructura de directorios","text":"<p>Clonamos el repositorio que hemos creado para la pr\u00e1ctica previamente en GitHub en nuestra carpeta personal</p> <pre><code>mkdir ~/repositorios/\n\ncd ~/repositorios/\n\ngit clone https://github.com/arodyeb/IAW-Practica1.1.git\n</code></pre> <p>Creamos las carpetas conf, htaccess, php y scripts en el directorio ra\u00edz del repositorio, donde guardaremos los archivos necesarios para configurar la instalaci\u00f3n de la pila LAMP</p> <pre><code>mkdir conf htaccess php scripts\n</code></pre>"},{"location":"practica1/#definicion-de-variables-en-archivo-env","title":"Definici\u00f3n de variables en archivo .env","text":"<p>Es necesario crear un archivo .env en el directorio de scripts con valores para una serie de variables que ser\u00e1n usadas posteriormente por los scripts de instalaci\u00f3n. Para evitar compartir el valor de dichas variables y que sea personalizable, en su lugar se comparte un archivo como plantilla que se ha de personalizar y renombrar.  </p>"},{"location":"practica1/#configuracion-de-install_lampsh","title":"Configuraci\u00f3n de \"install_lamp.sh\"","text":"<p>En la carpeta de scripts, creamos el archivo \"install_lamp.sh\"</p> <pre><code>cd scripts/\nsudo nano install_lamp.sh\n</code></pre> <p>Configuramos el script para que se detenga si ocurre alg\u00fan error y adem\u00e1s muestre los comandos por pantalla</p> <pre><code>#!/bin/bash\n\nset -ex\n</code></pre> <p>Actualizamos repositorios</p> <pre><code>apt update\n\napt upgrade -y\n</code></pre> <p>Instalamos Apache, habilitamos el m\u00f3dulo rewrite y copiamos el archivo de configuraci\u00f3n personalizado</p> <pre><code>apt install apache2 -y\n\na2enmod rewrite\n\ncp ../conf/000-default.conf /etc/apache2/sites-available\n</code></pre> <p>Instalamos PHP, el m\u00f3dulo de ejecuci\u00f3n de scripts PHP de Apache y la extensi\u00f3n de conexi\u00f3n entre PHP y MySQL</p> <pre><code>apt install php libapache2-mod-php php-mysql -y\n</code></pre> <p>Reiniciamos Apache para llevar a cabo los cambios y copiamos el archivo index</p> <pre><code>systemctl restart apache2\n\ncp ../php/index.php /var/www/html/\n</code></pre> <p>Instalamos MySQL y damos permisos sobre los archivos del sitio web al usuario y grupo de Apache  </p> <pre><code>apt install mysql-server -y\n\nchown -R www-data:www-data /var/www/html/*\n</code></pre> <p>Instalamos MySQL y damos permisos sobre los archivos del sitio web al usuario y grupo de Apache</p> <pre><code>apt install mysql-server -y\n\nchown -R www-data:www-data /var/www/html/*\n</code></pre> <p>El contenido del script debe ser tal que as\u00ed: <pre><code>#!/bin/bash\n\n#Configuramos el script para que se detenga si ocurre alg\u00fan error y adem\u00e1s muestre los comandos por pantalla\n\nset -ex\n\n#Actualizamos repositorios\n\napt update\n\napt upgrade -y\n\n#Instalamos Apache, habilitamos el m\u00f3dulo rewrite y copiamos el archivo de configuraci\u00f3n personalizado\n\napt install apache2 -y\n\na2enmod rewrite\n\ncp ../conf/000-default.conf /etc/apache2/sites-available\n\n#Instalamos PHP, el m\u00f3dulo de ejecuci\u00f3n de scripts PHP de Apache y la extensi\u00f3n de conexi\u00f3n entre PHP y MySQL\n\napt install php libapache2-mod-php php-mysql -y\n\n#Reiniciamos Apache para llevar a cabo los cambios y copiamos el archivo index\n\nsystemctl restart apache2\n\ncp ../php/index.php /var/www/html/\n\n#Instalamos MySQL y damos permisos sobre los archivos del sitio web al usuario y grupo de Apache  \n\napt install mysql-server -y\n\nchown -R www-data:www-data /var/www/html/*\n\n#Instalamos MySQL y damos permisos sobre los archivos del sitio web al usuario y grupo de Apache\n\napt install mysql-server -y\n\nchown -R www-data:www-data /var/www/html/*\n</code></pre> Al guardar el script de instalaci\u00f3n de la pila LAMP, le damos permisos de ejecuci\u00f3n: <pre><code>sudo chmod +x install_lamp.sh\n</code></pre> Creamos un archivo .env: <pre><code>sudo nano .env\n</code></pre> En este archivo se deben personalizar una serie de variables a las que luego se har\u00e1 referencia en otro script: <pre><code>PHPMYADMIN_APP_PASSWORD=tu_password_phpmyadmin\nDB_NAME=nombre_base\nDB_USER=usuario_base\nDB_PASSWORD=password_base\nSTATS_USERNAME=usuario_stats\nSTATS_PASSWORD=password_stats\nhome=/home/tu_usuario\n</code></pre> Creamos el script \"install_tools.sh\": <pre><code>sudo nano install_tools.sh\n</code></pre> Configuramos el script: <pre><code>#!/bin/bash\n\n# Configuramos el script para que se detenga si ocurre alg\u00fan error y adem\u00e1s muestre los comandos por pantalla\n\nset -ex\n\n# Importamos el archivo .env\n\nsource .env\n\n# Configuramos las respuestas de la instalaci\u00f3n de phpmyadmin\n\necho \"phpmyadmin phpmyadmin/reconfigure-webserver multiselect apache2\" | debconf-set-selections\n\necho \"phpmyadmin phpmyadmin/dbconfig-install boolean true\" | debconf-set-selections\n\necho \"phpmyadmin phpmyadmin/mysql/app-pass password $PHPMYADMIN_APP_PASSWORD\" | debconf-set-selections\n\necho \"phpmyadmin phpmyadmin/app-password-confirm password $PHPMYADMIN_APP_PASSWORD\" | debconf-set-selections\n\n# Actualizamos repositorios\n\napt update\n\n# Instalamos phpmyadmin\n\nsudo apt install phpmyadmin php-mbstring php-zip php-gd php-json php-curl -y\n\n# Creamos una carpeta para AdMiner y lo instalamos\n\nmkdir -p /var/www/html/adminer\n\nwget https://github.com/vrana/adminer/releases/download/v5.4.1/adminer-5.4.1-mysql.php -P /var/www/html/adminer/\n\nmv /var/www/html/adminer/adminer-5.4.1-mysql.php /var/www/html/adminer/index.php\n\n\n# Creamos una base de datos para comprobar que funciona\n\nmysql -u root -e \"DROP  DATABASE IF EXISTS $DB_NAME\"\n\nmysql -u root -e \"CREATE DATABASE $DB_NAME\"\n\n# Creamos un usuario\n\nmysql -u root -e \"DROP USER IF EXISTS $DB_USER@'%';\"\n\nmysql -u root -e \"CREATE USER '$DB_USER'@'%' IDENTIFIED BY '$DB_PASSWORD';\"\n\n# Damos permisos al usuario sobre la base de datos\n\nmysql -u root -e \"GRANT ALL PRIVILEGES ON $DB_NAME.* TO $DB_USER@'%';\"\n\n# Instalamos GoAccess\n\nsudo apt install goaccess -y\n\n# Creamos la carpeta stats en el directorio de Apache\n\nmkdir -p /var/www/html/stats\n\n# Creamos la carpeta htaccess en el home del usuario\n\nmkdir -p $home/htaccess\n\ngoaccess /var/log/apache2/access.log -o /var/www/html/stats/index.html --log-format=COMBINED --real-time-html --daemonize\n\ncp ../conf/000-default-stats.conf /etc/apache2/sites-available/000-default.conf\n\nsudo htpasswd -bc /etc/apache2/.htpasswd $STATS_USERNAME $STATS_PASSWORD\n\n# Copiamos el archivo htaccess\n\ncp ../htaccess/.htaccess /var/www/html/stats\n\n# Y reiniciamos Apache\n\nsystemctl restart apache2\n</code></pre> Al terminar de configurar el script, guardamos los cambios y le damos permisos de ejecuci\u00f3n: <pre><code>sudo chmod +x install_tools.sh\n</code></pre> Una vez configurados los scripts de instalaci\u00f3n, ejecutar primero el script de la pila Lamp <pre><code>sudo ./install_lamp.sh\n</code></pre> </p> <p>Y una vez comprobado que el script se ha ejecutado correctamente, ejecutamos el script de herramientas y comprobamos que tambi\u00e9n se haga sin errores <pre><code>sudo ./install_tools.sh\n</code></pre> </p>"},{"location":"practica2/","title":"IAW - Pr\u00e1ctica 5.4 - Dockerizar una web est\u00e1tica y publicarla en Docker Hub","text":""},{"location":"practica2/#descripcion","title":"Descripci\u00f3n","text":"<p>En esta pr\u00e1ctica se ha creado una imagen Docker que contiene una aplicaci\u00f3n web est\u00e1tica (el juego 2048) servida con Nginx. Posteriormente, la imagen se ha publicado en Docker Hub y se ha desplegado en una m\u00e1quina virtual de Amazon EC2.</p> <p>La aplicaci\u00f3n web utilizada se encuentra en el siguiente repositorio:</p> <p>https://github.com/josejuansanchez/2048</p>"},{"location":"practica2/#arbol-de-directorios","title":"\u00c1rbol de directorios","text":"<pre><code>IAW-Practica5.4\n\u251c\u2500\u2500 .github\n\u2502   \u2514\u2500\u2500 workflows\n\u2502       \u2514\u2500\u2500 publish-to-docker-hub.yml\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 dockerfile\n\u2514\u2500\u2500 imagenes\n    \u251c\u2500\u2500 imagen1.png\n    \u251c\u2500\u2500 imagen2.png\n    \u251c\u2500\u2500 imagen3.png\n    \u251c\u2500\u2500 imagen4.png\n    \u2514\u2500\u2500 imagen5.png\n</code></pre>"},{"location":"practica2/#creacion-del-dockerfile","title":"Creaci\u00f3n del Dockerfile","text":"<p>Se cre\u00f3 un archivo llamado Dockerfile con los siguientes requisitos:</p> <ul> <li> <p>Imagen base: ubuntu:latest</p> </li> <li> <p>Instalaci\u00f3n de:</p> </li> <li> <p>nginx</p> </li> <li> <p>git</p> </li> <li> <p>Clonaci\u00f3n del repositorio en /var/www/html</p> </li> <li> <p>Exposici\u00f3n del puerto 80</p> </li> <li> <p>Ejecuci\u00f3n de Nginx en primer plano</p> </li> </ul>"},{"location":"practica2/#dockerfile","title":"Dockerfile","text":"<pre><code>#Capa base \nFROM ubuntu:24.04\n\n#Actualizamos los paquetes\nRUN apt-get update &amp;&amp; apt-get upgrade -y \\\n    &amp;&amp; apt-get install nginx -y \\\n    &amp;&amp; apt-get clean\n\n#Configuramos el directorio de trabajos\nWORKDIR /var/www/html\n\n#Clonamos el repositorio de la aplicaci\u00f3n\nRUN apt-get install git -y \\\n    &amp;&amp; git clone https://github.com/josejuansanchez/2048 \\\n    &amp;&amp; mv 2048/* . \\\n    &amp;&amp; rm -rf 2048 \\\n    &amp;&amp; apt-get remove git -y \\\n    &amp;&amp; apt-get clean\n#Definimos el entrypoint\nENTRYPOINT [\"nginx\", \"-g\", \"daemon off;\"]\n</code></pre>"},{"location":"practica2/#construccion-de-la-imagen-docker","title":"Construcci\u00f3n de la imagen Docker","text":"<p>Se ejecut\u00f3 el siguiente comando (para publicar im\u00e1genes de particulares, no oficiales, es necesario a\u00f1adir el nombre de usuario de la cuenta de Dockerhub al nombre de la imagen):</p> <pre><code>docker build -t arodyeb/2048 .\n</code></pre>"},{"location":"practica2/#verificacion","title":"Verificaci\u00f3n:","text":"<pre><code>docker images\n</code></pre>"},{"location":"practica2/#automatizacion-de-la-publicacion-de-la-imagen","title":"Automatizaci\u00f3n de la publicaci\u00f3n de la imagen","text":"<p>Para que Github pueda publicar la imagen en Dockerhub es necesario configurar en el apartado secrets del repositorio tanto el username como el token de acceso de la cuenta de Dockerhub.</p>"},{"location":"practica2/#actualizacion-del-repositorio","title":"Actualizaci\u00f3n del repositorio","text":"<p>Ejecutar los comandos para actualizar el repositorio de Github</p> <pre><code>git add .\ngit commit -m \"mensaje\"\ngit push -u origin main\n</code></pre>"},{"location":"practica2/#inicializar-el-contenedor-con-la-imagen-creada","title":"Inicializar el contenedor con la imagen creada","text":"<pre><code>docker run -d -p 80:80 arodyeb/2048:latest\n</code></pre>"},{"location":"practica2/#comprobacion-del-funcionamiento","title":"Comprobaci\u00f3n del funcionamiento","text":"<p>Se accedi\u00f3 desde el navegador a:</p> <p>http://IP_PUBLICA</p> <p>Si la configuraci\u00f3n es correcta, se mostrar\u00e1 el juego 2048 funcionando.</p>"},{"location":"practica2/#ejemplos-de-ejecucion","title":"Ejemplos de ejecuci\u00f3n","text":""},{"location":"practica2/#construccion-de-la-imagen","title":"Construcci\u00f3n de la imagen","text":""},{"location":"practica2/#actualizacion-del-repositorio_1","title":"Actualizaci\u00f3n del repositorio","text":""},{"location":"practica2/#comprobacion-de-la-publicacion-de-la-imagen-en-dockerhub","title":"Comprobaci\u00f3n de la publicaci\u00f3n de la imagen en Dockerhub","text":""},{"location":"practica2/#inicializacion-del-contenedor","title":"Inicializaci\u00f3n del contenedor","text":""},{"location":"practica2/#verificacion-del-funcionamiento-de-la-pagina-web","title":"Verificaci\u00f3n del funcionamiento de la p\u00e1gina web","text":""}]}